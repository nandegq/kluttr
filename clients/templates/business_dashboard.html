{% extends 'base.html' %}

{% block title %}
Business Dashboard | kluttr.
{% endblock %}

{% block content %}
<div class="text-center space-y-8">
    <h1 class="text-3xl font-bold text-gray-800">Welcome, {{ user.username }} ðŸ‘‹</h1>
    <p class="text-gray-600 text-lg">
        Manage your waste pickups, subscriptions, and track progress all from one place.
    </p>

    {% if user.client.selected_plan %}
    <p class="text-gray-700 text-lg font-medium mt-2">
        Current Plan: <strong>{{ user.client.selected_plan.name }}</strong> -
        {{ user.client.selected_plan.pickups_per_month }} pickup{% if user.client.selected_plan.pickups_per_month > 1%}s
        {% endif %} per month
    </p>
    {% endif %}

    <!-- Quick Actions -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mt-10">

        <!-- Plan Selection -->
        <div class="glass p-6 rounded-2xl shadow-md hover:shadow-lg transition">
            <h3 class="text-xl font-semibold mb-2 text-gray-800">Manage your plan</h3>
            <p class="text-gray-600 mb-4">View or Change your plan.</p>
            <a href="{% url 'clients:manage_plan' %}"
                class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                View Plans
            </a>
        </div>

        <!-- Schedule Pickups -->
        <div class="glass p-6 rounded-2xl shadow-md hover:shadow-lg transition">
            <h3 class="text-xl font-semibold mb-2 text-gray-800">Schedule Pickups</h3>
            <p class="text-gray-600 mb-4">Once subscribed, you can schedule your pickups for the month.</p>
            {% if user.client.selected_plan %}
            <a href="{% url 'clients:schedule' %}"
                class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                Schedule Now
            </a>
            {% else %}
            <button class="bg-blue-300 text-white px-4 py-2 rounded-lg cursor-not-allowed" disabled>
                Schedule Now
            </button>
            {% endif %}
        </div>

        <!-- View Reports -->
        <div class="glass p-6 rounded-2xl shadow-md hover:shadow-lg transition">
            <h3 class="text-xl font-semibold mb-2 text-gray-800">View analytics</h3>
            <p class="text-gray-600 mb-4">Track your impact.</p>
            {% if user.client.selected_plan %}
            <a href="{% url 'analytics:client_dashboard' %}"
                class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                View now
            </a>
            {% else %}
            <button class="bg-blue-300 text-white px-4 py-2 rounded-lg cursor-not-allowed" disabled>
                View analytics
            </button>
            {% endif %}

        </div>

    </div>
</div>
{% endblock %}