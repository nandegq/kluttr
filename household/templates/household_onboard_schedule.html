{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}Schedule Pickup | Household{% endblock %}

{% block content %}
<h2 class="text-3xl font-semibold text-center mb-4 mt-4">Schedule Your Household Pickup</h2>

{% if selected_plan %}
<p class="text-center mb-6 text-gray-700">
    You selected the <strong>{{ selected_plan.plan_name }}</strong> plan:
    {{ selected_plan.customer_pickups_per_month }} pickup{% if selected_plan.customer_pickups_per_month > 1 %}s
    {% endif %} per month.
</p>
{% endif %}

<form method="post" class="max-w-lg mx-auto space-y-5">
    {% csrf_token %}

    {# Display form errors #}
    {% if form.errors %}
    <div class="bg-red-100 text-red-700 p-2 rounded mb-4">
        <ul>
            {% for field in form %}
            {% for error in field.errors %}
            <li>{{ field.label }}: {{ error }}</li>
            {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <div>
        <label class="block font-medium text-gray-700">Pickup Date</label>
        {{ form.customer_scheduled_date }}
    </div>

    <div>
        <label class="block font-medium text-gray-700">Pickup Time</label>
        {{ form.customer_pickup_time }}
    </div>

    <div>
        <label class="block font-medium text-gray-700">Waste Type</label>
        {{ form.customer_waste_type }}
    </div>

    <div>
        <label class="block font-medium text-gray-700">Notes (optional)</label>
        {{ form.customer_notes }}
    </div>

    <div>
        <label class='block font-medium text-gray-700'>Weight (kg)</label>
        {{ form.customer_weight }}
    </div>

    <div>
        <label class='block font-medium text-gray-700'>Upload Images (optional)</label>
        {{ form.customer_images }}
    </div>

    <button type="submit"
        class="w-full bg-purple-500 text-white font-medium py-2 rounded-lg hover:bg-purple-600 transition-colors mt-4">
        Confirm Pickup
    </button>
</form>

<p class="text-center mt-6 text-gray-600">
    <a href="{% url 'landing' %}" class="text-purple-500 hover:text-purple-600 font-medium">Back to Home</a>
</p>
{% endblock %}